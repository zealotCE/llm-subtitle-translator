# Watch/Output
WATCH_DIR=
WATCH_DIRS=/watch
WATCH_RECURSIVE=true
OUT_DIR=/output
TMP_DIR=/tmp
SCAN_INTERVAL=300
LOCK_TTL=7200
OUTPUT_TO_SOURCE_DIR=true
LOG_DIR=
LOG_FILE_NAME=worker.log
TRIGGER_SCAN_FILE=.scan_now
WORKER_CONCURRENCY=1
FFMPEG_CONCURRENCY=1
MAX_ACTIVE_JOBS=1

# Web Settings
WEB_HOST=0.0.0.0
WEB_PORT=8000
WEB_CONFIG_PATH=/app/.env
WEB_SCHEMA_PATH=/app/.env.example
WEB_DB_PATH=/app/web.db
WEB_UPLOAD_DIR=
WEB_UPLOAD_OVERWRITE=false
WEB_MAX_UPLOAD_MB=2048
WEB_TRIGGER_SCAN_FILE=.scan_now
WEB_WATCH_DIRS=
WEB_LOG_LIMIT=200
WEB_UPLOAD_ASR_MODE_DEFAULT=
WEB_UPLOAD_SEGMENT_MODE_DEFAULT=
WEB_WAL_CHECKPOINT_EVERY=50
WEB_MEDIA_DIRS=
WEB_MEDIA_RECURSIVE=true
WEB_ARCHIVE_DIR=
WEB_ALLOW_DELETE=false
WEB_METADATA_DIR=metadata
WEB_MEDIA_SCAN_INTERVAL=0
WEB_TRIGGER_SCAN_INTERVAL=0
WEB_AUTH_ENABLED=false
WEB_AUTH_USER=admin
WEB_AUTH_PASSWORD=
WEB_AUTH_SECRET=change-me
WEB_AUTH_COOKIE=autosub_auth
WEB_AUTH_TTL=86400

# DashScope
DASHSCOPE_API_KEY=YOUR_DASHSCOPE_API_KEY
ASR_MODEL=paraformer-v2
ASR_MODE=offline
SEGMENT_MODE=post
ASR_SAMPLE_RATE=16000
ASR_REALTIME_CHUNK_SECONDS=900
ASR_REALTIME_CHUNK_OVERLAP_MS=500
ASR_REALTIME_RETRY=2
ASR_REALTIME_CHUNK_MIN_SECONDS=300
ASR_REALTIME_CHUNK_MAX_SECONDS=900
ASR_REALTIME_CHUNK_TARGET=12
ASR_REALTIME_FAILURE_RATE_THRESHOLD=0.3
ASR_REALTIME_ADAPTIVE_RETRY=true
ASR_REALTIME_STREAMING_ENABLED=false
ASR_REALTIME_STREAM_FRAME_MS=100
ASR_REALTIME_FALLBACK_ENABLED=true
ASR_REALTIME_FALLBACK_MAX_SENTENCE_SILENCE=1200
ASR_REALTIME_FALLBACK_MULTI_THRESHOLD=true
ASR_SEMANTIC_PUNCTUATION_ENABLED=false
ASR_MAX_SENTENCE_SILENCE=800
ASR_MULTI_THRESHOLD_MODE_ENABLED=false
ASR_PUNCTUATION_PREDICTION_ENABLED=true
ASR_DISFLUENCY_REMOVAL_ENABLED=false
ASR_HEARTBEAT=false
LANGUAGE_HINTS=ja,en

# OSS
OSS_ENDPOINT=oss-cn-your-region.aliyuncs.com
OSS_BUCKET=your-bucket-name
OSS_ACCESS_KEY_ID=YOUR_OSS_ACCESS_KEY_ID
OSS_ACCESS_KEY_SECRET=YOUR_OSS_ACCESS_KEY_SECRET
OSS_PREFIX=subtitle-audio/
OSS_URL_MODE=presign
OSS_PRESIGN_EXPIRE=86400
DELETE_OSS_OBJECT=false

# Optional
SAVE_RAW_JSON=false
MOVE_DONE=false
DONE_DIR=/watch/done
OUTPUT_LANG_SUFFIX=

# Translation (LLM)
TRANSLATE=true
USE_EXISTING_SUBTITLE=true
SIMPLIFIED_LANG=zh
IGNORE_SIMPLIFIED_SUBTITLE=false
SUBTITLE_MODE=reuse_if_good
SUBTITLE_PREFER_LANGS_SRC=jpn,ja
SUBTITLE_PREFER_LANGS_DST=chi,zh,zh-hans
SUBTITLE_EXCLUDE_TITLES=sign,song,karaoke
SUBTITLE_INDEX=
SUBTITLE_LANG=
AUDIO_PREFER_LANGS=jpn,ja,eng,en
AUDIO_EXCLUDE_TITLES=commentary,コメンタリー
AUDIO_INDEX=
AUDIO_LANG=
METADATA_ENABLED=false
METADATA_LANGUAGE_PRIORITY=ja-JP,zh-CN,en-US
METADATA_MIN_CONFIDENCE=0.5
METADATA_MIN_TITLE_SIMILARITY=0.6
METADATA_CACHE_TTL=86400
METADATA_DEBUG=false
TITLE_ALIASES_PATH=
LLM_TITLE_ALIAS_ENABLED=true
WORK_GLOSSARY_DIR=glossary
WORK_GLOSSARY_ENABLED=true
ASR_HOTWORDS_ENABLED=false
ASR_HOTWORDS_MAX=50
ASR_HOTWORDS_LANGS=ja,jpn,en,eng,zh,chi
ASR_HOTWORDS_PARAM=hot_words
ASR_HOTWORDS_USE_GLOSSARY=true
ASR_HOTWORDS_USE_METADATA=true
ASR_HOTWORDS_USE_TITLE_ALIASES=true
ASR_HOTWORDS_MODE=vocabulary
ASR_HOTWORDS_WEIGHT=4
ASR_HOTWORDS_PREFIX=autosub
ASR_HOTWORDS_TARGET_MODEL=
ASR_HOTWORDS_ALLOW_MIXED=false
TMDB_ENABLED=true
TMDB_API_KEY=
TMDB_BASE_URL=https://api.themoviedb.org/3
BANGUMI_ENABLED=true
BANGUMI_ACCESS_TOKEN=
BANGUMI_USER_AGENT=auto-subtitle/1.0
BANGUMI_BASE_URL=https://api.bgm.tv
WMDB_ENABLED=false
WMDB_BASE_URL=https://api.wmdb.tv
PROVIDER_WEIGHT_TMDB=1.0
PROVIDER_WEIGHT_BANGUMI=0.8
PROVIDER_WEIGHT_WMDB=0.5
SRC_LANG=auto
DST_LANG=zh
DST_LANGS=
LLM_BASE_URL=
LLM_API_KEY=
LLM_MODEL=deepseek-v3.2
# 已验证可用模型：deepseek-v3.2, qwen3-max-preview, qwen3-235b-a22b-thinking-2507, kimi-k2-thinking, glm-4.7, qwen3-next-80b-a3b-thinking, qwen3-235b-a22b-instruct-2507
LLM_TEMPERATURE=0.2
LLM_MAX_TOKENS=1024
BATCH_LINES=10
MAX_CONCURRENT_TRANSLATIONS=2
TRANSLATE_RETRY=3
MAX_CHARS_PER_LINE=20
BILINGUAL=false
BILINGUAL_ORDER=raw_first
BILINGUAL_LANG=
USE_POLISH=false
POLISH_BATCH_SIZE=80
GLOSSARY_PATH=
GLOSSARY_CONFIDENCE_THRESHOLD=0.75
MIN_TRANSLATE_DURATION=60
ASR_MAX_DURATION_SECONDS=3.5
ASR_MAX_CHARS=25
ASR_MIN_DURATION_SECONDS=1.0
ASR_MIN_CHARS=6
ASR_MERGE_GAP_MS=400
NFO_ENABLED=false
NFO_SAME_NAME_ONLY=true
GROUPING_ENABLED=true
CONTEXT_AWARE_ENABLED=true
EVAL_COLLECT=false
EVAL_OUTPUT_DIR=eval
EVAL_SAMPLE_RATE=1.0
MANUAL_METADATA_DIR=metadata
SRT_VALIDATE=true
SRT_AUTO_FIX=true
LLM_RPS=0
DASHSCOPE_RPS=0
METADATA_RPS=0
